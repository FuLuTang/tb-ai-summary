const translations = {
    "en": {
        "settingsTitle": "AI Mail Summarizer Settings",
        "apiKeyLabel": "API Key",
        "apiUrlLabel": "API URL",
        "modelLabel": "Model Name",
        "temperatureLabel": "Temperature (0.0 - 2.0)",
        "temperatureDesc": "Controls AI randomness. Lower (0.2) is more focused, higher (0.8) is more creative.",
        "maxRpsLabel": "Max Requests Per Second (RPS)",
        "maxRpsDesc": "OpenAI default limit is ~5 req/s. Adjust based on your quota.",
        "maxConcurrentLabel": "Max Concurrent Requests",
        "maxConcurrentDesc": "Controls simultaneous requests to avoid failures.",
        "maxCacheLabel": "Max Cache Entries",
        "maxCacheDesc": "Max number of summaries to keep. Oldest will be removed when full.",
        "briefingUrgencyLabel": "Briefing Urgency Threshold",
        "briefingUrgencyDesc": "Only include emails with urgency >= this value in briefings. Default 5.",
        "displayLanguageLabel": "Display Language",
        "outputLanguageLabel": "AI Output Language",
        "saveBtn": "Save Settings",
        "clearBtn": "Clear Cache",
        "logTitle": "Logs",
        "statusSaved": "Settings saved",
        "statusClearConfirm": "Are you sure you want to clear all cache? This will delete all saved summaries.",
        "statusClearing": "Clearing cache...",
        "statusCleared": "Cache cleared (removed {n} entries)",
        "statusError": "Error: {error}",
        "popupNoMail": "No email detected.",
        "popupSummarizeBtn": "Summarize",
        "popupBatchBtn": "Batch Summarize",
        "popupBriefingBtn": "New Briefing",
        "popupViewBriefingBtn": "View Existing Briefing",
        "popupLoading": "Thinking...",
        "popupRegenerate": "Regenerate",
        "popupRetry": "Retry",
        "urgency": "Urgency",
        "summaryHeader": "Summary",
        "actionItemsHeader": "Action Items",
        "briefingTitle": "Email Briefing",
        "briefingNoContent": "No briefing found. Please generate one first.",
        "popupBriefingStarted": "Briefing task sent to background. Click 'View Existing Briefing' later.",
        "popupBatchStarted": "Batch processing started for last {n} emails... Check logs or cache later.",
        "logBatchStart": ">>> Batch request received: starting...",
        "logBatchProgress": "Progress: {current} / {total} emails...",
        "logBatchComplete": "<<< Batch summary complete!",
        "logBatchError": "!!! Batch error: {error}",
        "logSummaryLoading": "[{id}] {subject} Analyzing...",
        "logSummarySuccess": "[{id}] {subject} Success",
        "logSummaryError": "[{id}] {subject} Failed: {error}",
        "briefingGeneratedAt": "Generated at: "
    },
    "zh": {
        "settingsTitle": "AI Mail Summarizer 设置",
        "apiKeyLabel": "API Key",
        "apiUrlLabel": "API URL",
        "modelLabel": "模型名称",
        "temperatureLabel": "温度 (0.0 - 2.0)",
        "temperatureDesc": "控制 AI 的随机性。较低的值 (0.2) 更严谨，较高的值 (0.8) 更具创造性。",
        "maxRpsLabel": "每秒请求上限 (RPS)",
        "maxRpsDesc": "OpenAI 默认速率限制约为 5 req/s，可根据账号配额调整。",
        "maxConcurrentLabel": "并发请求上限",
        "maxConcurrentDesc": "控制同时并发的请求数量，避免一次性发出过多请求导致失败。",
        "maxCacheLabel": "最大缓存数量",
        "maxCacheDesc": "设置缓存的邮件摘要数量。当超过此数量时，最早查看的摘要将被自动删除。",
        "briefingUrgencyLabel": "简报紧急度阈值",
        "briefingUrgencyDesc": "生成简报时，仅包含紧急度分数大于或等于此值的邮件。默认 5。",
        "displayLanguageLabel": "显示语言",
        "outputLanguageLabel": "AI 输出语言",
        "saveBtn": "保存设置",
        "clearBtn": "清空缓存",
        "logTitle": "运行日志",
        "statusSaved": "设置已保存",
        "statusClearConfirm": "确定要清空所有缓存吗？这将删除所有已保存的摘要，但保留设置。",
        "statusClearing": "正在清空缓存...",
        "statusCleared": "缓存已清空（删除 {n} 条）",
        "statusError": "错误: {error}",
        "popupNoMail": "没有检测到打开的邮件。",
        "popupSummarizeBtn": "开始总结",
        "popupBatchBtn": "一键总结邮件",
        "popupBriefingBtn": "新简报",
        "popupViewBriefingBtn": "查看已有简报",
        "popupLoading": "正在思考...",
        "popupRegenerate": "重新生成",
        "popupRetry": "重试",
        "urgency": "紧迫度",
        "summaryHeader": "摘要",
        "actionItemsHeader": "待办事项",
        "briefingTitle": "邮件简报",
        "briefingNoContent": "暂无简报记录。请先在插件弹窗中点击“新简报”生成。",
        "popupBriefingStarted": "任务已发送到后台。完成后点击“查看已有简报”查看结果。",
        "popupBatchStarted": "已在后台开始批量处理最近 {n} 封邮件... 请稍后查看缓存或再次打开此窗口。",
        "logBatchStart": ">>> 收到批量总结请求：开始处理...",
        "logBatchProgress": "进度更新: 正在处理第 {current} / {total} 封...",
        "logBatchComplete": "<<< 批量总结全部完成！",
        "logBatchError": "!!! 批量处理出错: {error}",
        "logSummaryLoading": "[{id}] {subject} 正在请求 AI 分析...",
        "logSummarySuccess": "[{id}] {subject} 总结成功",
        "logSummaryError": "[{id}] {subject} 总结失败: {error}",
        "briefingGeneratedAt": "生成时间: "
    },
    "fr": {
        "settingsTitle": "Paramètres AI Mail Summarizer",
        "apiKeyLabel": "Clé API",
        "apiUrlLabel": "URL de l'API",
        "modelLabel": "Nom du modèle",
        "temperatureLabel": "Température (0.0 - 2.0)",
        "temperatureDesc": "Contrôle le caractère aléatoire de l'IA. Plus bas (0.2) est plus précis, plus haut (0.8) est plus créatif.",
        "maxRpsLabel": "Requêtes max par seconde (RPS)",
        "maxRpsDesc": "La limite par défaut d'OpenAI est ~5 req/s. Ajustez selon votre quota.",
        "maxConcurrentLabel": "Requêtes simultanées max",
        "maxConcurrentDesc": "Contrôle les requêtes simultanées pour éviter les échecs.",
        "maxCacheLabel": "Entrées de cache max",
        "maxCacheDesc": "Nombre max de résumés à conserver. Les plus anciens seront supprimés.",
        "briefingUrgencyLabel": "Seuil d'urgence du briefing",
        "briefingUrgencyDesc": "Inclure uniquement les e-mails avec urgence >= cette valeur. Par défaut 5.",
        "displayLanguageLabel": "Langue d'affichage",
        "outputLanguageLabel": "Langue de sortie IA",
        "saveBtn": "Enregistrer",
        "clearBtn": "Vider le cache",
        "logTitle": "Journaux",
        "statusSaved": "Paramètres enregistrés",
        "statusClearConfirm": "Voulez-vous vraiment vider tout le cache ? Cela supprimera tous les résumés enregistrés.",
        "statusClearing": "Vidage du cache...",
        "statusCleared": "Cache vidé ({n} entrées supprimées)",
        "statusError": "Erreur : {error}",
        "popupNoMail": "Aucun e-mail détecté.",
        "popupSummarizeBtn": "Résumer",
        "popupBatchBtn": "Résumé par lot",
        "popupBriefingBtn": "Nouveau briefing",
        "popupViewBriefingBtn": "Voir le briefing existant",
        "popupLoading": "Réflexion en cours...",
        "popupRegenerate": "Régénérer",
        "popupRetry": "Réessayer",
        "urgency": "Urgence",
        "summaryHeader": "Résumé",
        "actionItemsHeader": "Actions requises",
        "briefingTitle": "Briefing e-mail",
        "briefingNoContent": "Aucun briefing trouvé. Veuillez en générer un d'abord.",
        "popupBriefingStarted": "Tâche de briefing envoyée en arrière-plan. Cliquez sur 'Voir le briefing existant' plus tard.",
        "popupBatchStarted": "Traitement par lot démarré pour les {n} derniers e-mails...",
        "logBatchStart": ">>> Demande de lot reçue : démarrage...",
        "logBatchProgress": "Progression : {current} / {total} e-mails...",
        "logBatchComplete": "<<< Résumé par lot terminé !",
        "logBatchError": "!!! Erreur de lot : {error}",
        "logSummaryLoading": "[{id}] {subject} Analyse...",
        "logSummarySuccess": "[{id}] {subject} Succès",
        "logSummaryError": "[{id}] {subject} Échec : {error}",
        "briefingGeneratedAt": "Généré à : "
    },
    "ja": {
        "settingsTitle": "AI Mail Summarizer 設定",
        "apiKeyLabel": "API キー",
        "apiUrlLabel": "API URL",
        "modelLabel": "モデル名",
        "temperatureLabel": "温度 (0.0 - 2.0)",
        "temperatureDesc": "AIのランダム性を制御します。低い値 (0.2) はより正確、高い値 (0.8) はより創造的です。",
        "maxRpsLabel": "最大リクエスト数/秒 (RPS)",
        "maxRpsDesc": "OpenAIのデフォルト制限は約5 req/sです。クォータに応じて調整してください。",
        "maxConcurrentLabel": "最大同時リクエスト数",
        "maxConcurrentDesc": "同時リクエスト数を制御して、失敗を防ぎます。",
        "maxCacheLabel": "最大キャッシュ数",
        "maxCacheDesc": "保存する要約の最大数。これを超えると古いものから削除されます。",
        "briefingUrgencyLabel": "ブリーフィング緊急度しきい値",
        "briefingUrgencyDesc": "緊急度がこの値以上のメールのみをブリーフィングに含めます。デフォルトは5です。",
        "displayLanguageLabel": "表示言語",
        "outputLanguageLabel": "AI 出力言語",
        "saveBtn": "設定を保存",
        "clearBtn": "キャッシュをクリア",
        "logTitle": "ログ",
        "statusSaved": "設定を保存しました",
        "statusClearConfirm": "本当にすべてのキャッシュをクリアしますか？保存されたすべての要約が削除されます。",
        "statusClearing": "キャッシュをクリア中...",
        "statusCleared": "キャッシュをクリアしました ({n} 件削除)",
        "statusError": "エラー: {error}",
        "popupNoMail": "メールが検出されませんでした。",
        "popupSummarizeBtn": "要約する",
        "popupBatchBtn": "一括要約",
        "popupBriefingBtn": "新しいブリーフィング",
        "popupViewBriefingBtn": "既存のブリーフィングを表示",
        "popupLoading": "考え中...",
        "popupRegenerate": "再生成",
        "popupRetry": "再試行",
        "urgency": "緊急度",
        "summaryHeader": "要約",
        "actionItemsHeader": "アクションアイテム",
        "briefingTitle": "メールブリーフィング",
        "briefingNoContent": "ブリーフィングが見つかりません。先に生成してください。",
        "briefingGeneratedAt": "生成日時: "
    }
};

function getText(key, lang = "en") {
    const dict = translations[lang] || translations["en"];
    return dict[key] || key;
}

// Export for use in other modules if needed (though mostly used via direct inclusion)
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { translations, getText };
}
